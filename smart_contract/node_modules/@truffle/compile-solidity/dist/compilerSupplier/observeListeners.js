"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.observeListeners = void 0;
const observeListeners = () => {
    const listeners = new ObservedListeners();
    return listeners;
};
exports.observeListeners = observeListeners;
class ObservedListeners {
    constructor() {
        this.listeners = {
            uncaughtException: new Set(process.listeners("uncaughtException")),
            unhandledRejection: new Set(process.listeners("unhandledRejection")),
        };
    }
    /**
     * Cleans up error listeners left by soljson
     */
    cleanup() {
        for (const eventName in this.listeners) {
            const marked = this.listeners[eventName];
            for (const listener of process.listeners(eventName)) {
                if (!marked.has(listener)) {
                    process.removeListener(eventName, listener);
                }
            }
        }
    }
}
//# sourceMappingURL=observeListeners.js.map