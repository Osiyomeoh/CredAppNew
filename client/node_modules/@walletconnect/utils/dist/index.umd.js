(function(g,pe){typeof exports=="object"&&typeof module<"u"?pe(exports):typeof define=="function"&&define.amd?define(["exports"],pe):(g=typeof globalThis<"u"?globalThis:g||self,pe(g["@walletconnect/utils"]={}))})(this,function(g){"use strict";const pe=":";function Xt(e){const[t,r]=e.split(pe);return{namespace:t,reference:r}}function Jt(e){const{namespace:t,reference:r}=e;return[t,r].join(pe)}function dt(e){const[t,r,i]=e.split(pe);return{namespace:t,reference:r,address:i}}function Qt(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(pe)}function _t(e,t){const r=[];return e.forEach(i=>{const a=t(i);r.includes(a)||r.push(a)}),r}function Zt(e){const{address:t}=dt(e);return t}function er(e){const{namespace:t,reference:r}=dt(e);return Jt({namespace:t,reference:r})}function qn(e,t){const{namespace:r,reference:i}=Xt(t);return Qt({namespace:r,reference:i,address:e})}function zn(e){return _t(e,Zt)}function tr(e){return _t(e,er)}function Yn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.accounts)}),r}function xn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...tr(a.accounts))}),r}function Gn(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...ke(i,a))}),r}function ke(e,t){return e.includes(":")?[e]:t.chains||[]}const Xe=e=>e?.split(":"),rr=e=>{const t=e&&Xe(e);if(t)return t[3]},kn=e=>{const t=e&&Xe(e);if(t)return t[2]+":"+t[3]},nr=e=>{const t=e&&Xe(e);if(t)return t.pop()},Xn=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=nr(t),a=e.statement,u=`URI: ${e.aud}`,E=`Version: ${e.version}`,s=`Chain ID: ${rr(t)}`,l=`Nonce: ${e.nonce}`,_=`Issued At: ${e.iat}`,D=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(y=>`- ${y}`).join(`
`)}`:void 0;return[r,i,"",a,"",u,E,s,l,_,D].filter(y=>y!=null).join(`
`)};function ir(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var Dt={},Je={},M={},ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,l){var _=s>>>16&65535,D=s&65535,y=l>>>16&65535,w=l&65535;return D*w+(_*w+D*y<<16>>>0)|0}e.mul=Math.imul||t;function r(s,l){return s+l|0}e.add=r;function i(s,l){return s-l|0}e.sub=i;function a(s,l){return s<<l|s>>>32-l}e.rotl=a;function u(s,l){return s<<32-l|s>>>l}e.rotr=u;function E(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}e.isInteger=Number.isInteger||E,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(s){return e.isInteger(s)&&s>=-e.MAX_SAFE_INTEGER&&s<=e.MAX_SAFE_INTEGER}})(ar),Object.defineProperty(M,"__esModule",{value:!0});var or=ar;function Jn(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}M.readInt16BE=Jn;function Qn(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}M.readUint16BE=Qn;function Zn(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}M.readInt16LE=Zn;function ei(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}M.readUint16LE=ei;function sr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}M.writeUint16BE=sr,M.writeInt16BE=sr;function ur(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}M.writeUint16LE=ur,M.writeInt16LE=ur;function bt(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}M.readInt32BE=bt;function Et(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}M.readUint32BE=Et;function gt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}M.readInt32LE=gt;function vt(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}M.readUint32LE=vt;function Qe(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}M.writeUint32BE=Qe,M.writeInt32BE=Qe;function Ze(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}M.writeUint32LE=Ze,M.writeInt32LE=Ze;function ti(e,t){t===void 0&&(t=0);var r=bt(e,t),i=bt(e,t+4);return r*4294967296+i-(i>>31)*4294967296}M.readInt64BE=ti;function ri(e,t){t===void 0&&(t=0);var r=Et(e,t),i=Et(e,t+4);return r*4294967296+i}M.readUint64BE=ri;function ni(e,t){t===void 0&&(t=0);var r=gt(e,t),i=gt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}M.readInt64LE=ni;function ii(e,t){t===void 0&&(t=0);var r=vt(e,t),i=vt(e,t+4);return i*4294967296+r}M.readUint64LE=ii;function cr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Qe(e/4294967296>>>0,t,r),Qe(e>>>0,t,r+4),t}M.writeUint64BE=cr,M.writeInt64BE=cr;function fr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ze(e>>>0,t,r),Ze(e/4294967296>>>0,t,r+4),t}M.writeUint64LE=fr,M.writeInt64LE=fr;function ai(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,a=1,u=e/8+r-1;u>=r;u--)i+=t[u]*a,a*=256;return i}M.readUintBE=ai;function oi(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,a=1,u=r;u<r+e/8;u++)i+=t[u]*a,a*=256;return i}M.readUintLE=oi;function si(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!or.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,u=e/8+i-1;u>=i;u--)r[u]=t/a&255,a*=256;return r}M.writeUintBE=si;function ui(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!or.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,u=i;u<i+e/8;u++)r[u]=t/a&255,a*=256;return r}M.writeUintLE=ui;function ci(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}M.readFloat32BE=ci;function fi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}M.readFloat32LE=fi;function hi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}M.readFloat64BE=hi;function li(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}M.readFloat64LE=li;function di(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}M.writeFloat32BE=di;function _i(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}M.writeFloat32LE=_i;function Di(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}M.writeFloat64BE=Di;function bi(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}M.writeFloat64LE=bi;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});function Ei(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ve.wipe=Ei,Object.defineProperty(Je,"__esModule",{value:!0});var ee=M,yt=ve,gi=20;function vi(e,t,r){for(var i=1634760805,a=857760878,u=2036477234,E=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],_=r[11]<<24|r[10]<<16|r[9]<<8|r[8],D=r[15]<<24|r[14]<<16|r[13]<<8|r[12],y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],w=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],U=t[11]<<24|t[10]<<16|t[9]<<8|t[8],d=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=i,c=a,h=u,f=E,n=s,o=l,S=_,A=D,T=y,P=w,L=v,j=m,R=O,F=p,C=U,I=d,G=0;G<gi;G+=2)b=b+n|0,R^=b,R=R>>>32-16|R<<16,T=T+R|0,n^=T,n=n>>>32-12|n<<12,c=c+o|0,F^=c,F=F>>>32-16|F<<16,P=P+F|0,o^=P,o=o>>>32-12|o<<12,h=h+S|0,C^=h,C=C>>>32-16|C<<16,L=L+C|0,S^=L,S=S>>>32-12|S<<12,f=f+A|0,I^=f,I=I>>>32-16|I<<16,j=j+I|0,A^=j,A=A>>>32-12|A<<12,h=h+S|0,C^=h,C=C>>>32-8|C<<8,L=L+C|0,S^=L,S=S>>>32-7|S<<7,f=f+A|0,I^=f,I=I>>>32-8|I<<8,j=j+I|0,A^=j,A=A>>>32-7|A<<7,c=c+o|0,F^=c,F=F>>>32-8|F<<8,P=P+F|0,o^=P,o=o>>>32-7|o<<7,b=b+n|0,R^=b,R=R>>>32-8|R<<8,T=T+R|0,n^=T,n=n>>>32-7|n<<7,b=b+o|0,I^=b,I=I>>>32-16|I<<16,L=L+I|0,o^=L,o=o>>>32-12|o<<12,c=c+S|0,R^=c,R=R>>>32-16|R<<16,j=j+R|0,S^=j,S=S>>>32-12|S<<12,h=h+A|0,F^=h,F=F>>>32-16|F<<16,T=T+F|0,A^=T,A=A>>>32-12|A<<12,f=f+n|0,C^=f,C=C>>>32-16|C<<16,P=P+C|0,n^=P,n=n>>>32-12|n<<12,h=h+A|0,F^=h,F=F>>>32-8|F<<8,T=T+F|0,A^=T,A=A>>>32-7|A<<7,f=f+n|0,C^=f,C=C>>>32-8|C<<8,P=P+C|0,n^=P,n=n>>>32-7|n<<7,c=c+S|0,R^=c,R=R>>>32-8|R<<8,j=j+R|0,S^=j,S=S>>>32-7|S<<7,b=b+o|0,I^=b,I=I>>>32-8|I<<8,L=L+I|0,o^=L,o=o>>>32-7|o<<7;ee.writeUint32LE(b+i|0,e,0),ee.writeUint32LE(c+a|0,e,4),ee.writeUint32LE(h+u|0,e,8),ee.writeUint32LE(f+E|0,e,12),ee.writeUint32LE(n+s|0,e,16),ee.writeUint32LE(o+l|0,e,20),ee.writeUint32LE(S+_|0,e,24),ee.writeUint32LE(A+D|0,e,28),ee.writeUint32LE(T+y|0,e,32),ee.writeUint32LE(P+w|0,e,36),ee.writeUint32LE(L+v|0,e,40),ee.writeUint32LE(j+m|0,e,44),ee.writeUint32LE(R+O|0,e,48),ee.writeUint32LE(F+p|0,e,52),ee.writeUint32LE(C+U|0,e,56),ee.writeUint32LE(I+d|0,e,60)}function hr(e,t,r,i,a){if(a===void 0&&(a=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var u,E;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=new Uint8Array(16),E=u.length-t.length,u.set(t,E)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");u=t,E=a}for(var s=new Uint8Array(64),l=0;l<r.length;l+=64){vi(s,u,e);for(var _=l;_<l+64&&_<r.length;_++)i[_]=r[_]^s[_-l];wi(u,0,E)}return yt.wipe(s),a===0&&yt.wipe(u),i}Je.streamXOR=hr;function yi(e,t,r,i){return i===void 0&&(i=0),yt.wipe(r),hr(e,t,r,r,i)}Je.stream=yi;function wi(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var lr={},Se={};Object.defineProperty(Se,"__esModule",{value:!0});function mi(e,t,r){return~(e-1)&t|e-1&r}Se.select=mi;function pi(e,t){return(e|0)-(t|0)-1>>>31&1}Se.lessOrEqual=pi;function dr(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Se.compare=dr;function Si(e,t){return e.length===0||t.length===0?!1:dr(e,t)!==0}Se.equal=Si,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Se,r=ve;e.DIGEST_LENGTH=16;var i=function(){function E(s){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=s[0]|s[1]<<8;this._r[0]=l&8191;var _=s[2]|s[3]<<8;this._r[1]=(l>>>13|_<<3)&8191;var D=s[4]|s[5]<<8;this._r[2]=(_>>>10|D<<6)&7939;var y=s[6]|s[7]<<8;this._r[3]=(D>>>7|y<<9)&8191;var w=s[8]|s[9]<<8;this._r[4]=(y>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var v=s[10]|s[11]<<8;this._r[6]=(w>>>14|v<<2)&8191;var m=s[12]|s[13]<<8;this._r[7]=(v>>>11|m<<5)&8065;var O=s[14]|s[15]<<8;this._r[8]=(m>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return E.prototype._blocks=function(s,l,_){for(var D=this._fin?0:2048,y=this._h[0],w=this._h[1],v=this._h[2],m=this._h[3],O=this._h[4],p=this._h[5],U=this._h[6],d=this._h[7],b=this._h[8],c=this._h[9],h=this._r[0],f=this._r[1],n=this._r[2],o=this._r[3],S=this._r[4],A=this._r[5],T=this._r[6],P=this._r[7],L=this._r[8],j=this._r[9];_>=16;){var R=s[l+0]|s[l+1]<<8;y+=R&8191;var F=s[l+2]|s[l+3]<<8;w+=(R>>>13|F<<3)&8191;var C=s[l+4]|s[l+5]<<8;v+=(F>>>10|C<<6)&8191;var I=s[l+6]|s[l+7]<<8;m+=(C>>>7|I<<9)&8191;var G=s[l+8]|s[l+9]<<8;O+=(I>>>4|G<<12)&8191,p+=G>>>1&8191;var Q=s[l+10]|s[l+11]<<8;U+=(G>>>14|Q<<2)&8191;var J=s[l+12]|s[l+13]<<8;d+=(Q>>>11|J<<5)&8191;var X=s[l+14]|s[l+15]<<8;b+=(J>>>8|X<<8)&8191,c+=X>>>5|D;var N=0,B=N;B+=y*h,B+=w*(5*j),B+=v*(5*L),B+=m*(5*P),B+=O*(5*T),N=B>>>13,B&=8191,B+=p*(5*A),B+=U*(5*S),B+=d*(5*o),B+=b*(5*n),B+=c*(5*f),N+=B>>>13,B&=8191;var $=N;$+=y*f,$+=w*h,$+=v*(5*j),$+=m*(5*L),$+=O*(5*P),N=$>>>13,$&=8191,$+=p*(5*T),$+=U*(5*A),$+=d*(5*S),$+=b*(5*o),$+=c*(5*n),N+=$>>>13,$&=8191;var V=N;V+=y*n,V+=w*f,V+=v*h,V+=m*(5*j),V+=O*(5*L),N=V>>>13,V&=8191,V+=p*(5*P),V+=U*(5*T),V+=d*(5*A),V+=b*(5*S),V+=c*(5*o),N+=V>>>13,V&=8191;var H=N;H+=y*o,H+=w*n,H+=v*f,H+=m*h,H+=O*(5*j),N=H>>>13,H&=8191,H+=p*(5*L),H+=U*(5*P),H+=d*(5*T),H+=b*(5*A),H+=c*(5*S),N+=H>>>13,H&=8191;var K=N;K+=y*S,K+=w*o,K+=v*n,K+=m*f,K+=O*h,N=K>>>13,K&=8191,K+=p*(5*j),K+=U*(5*L),K+=d*(5*P),K+=b*(5*T),K+=c*(5*A),N+=K>>>13,K&=8191;var W=N;W+=y*A,W+=w*S,W+=v*o,W+=m*n,W+=O*f,N=W>>>13,W&=8191,W+=p*h,W+=U*(5*j),W+=d*(5*L),W+=b*(5*P),W+=c*(5*T),N+=W>>>13,W&=8191;var q=N;q+=y*T,q+=w*A,q+=v*S,q+=m*o,q+=O*n,N=q>>>13,q&=8191,q+=p*f,q+=U*h,q+=d*(5*j),q+=b*(5*L),q+=c*(5*P),N+=q>>>13,q&=8191;var Y=N;Y+=y*P,Y+=w*T,Y+=v*A,Y+=m*S,Y+=O*o,N=Y>>>13,Y&=8191,Y+=p*n,Y+=U*f,Y+=d*h,Y+=b*(5*j),Y+=c*(5*L),N+=Y>>>13,Y&=8191;var x=N;x+=y*L,x+=w*P,x+=v*T,x+=m*A,x+=O*S,N=x>>>13,x&=8191,x+=p*o,x+=U*n,x+=d*f,x+=b*h,x+=c*(5*j),N+=x>>>13,x&=8191;var k=N;k+=y*j,k+=w*L,k+=v*P,k+=m*T,k+=O*A,N=k>>>13,k&=8191,k+=p*S,k+=U*o,k+=d*n,k+=b*f,k+=c*h,N+=k>>>13,k&=8191,N=(N<<2)+N|0,N=N+B|0,B=N&8191,N=N>>>13,$+=N,y=B,w=$,v=V,m=H,O=K,p=W,U=q,d=Y,b=x,c=k,l+=16,_-=16}this._h[0]=y,this._h[1]=w,this._h[2]=v,this._h[3]=m,this._h[4]=O,this._h[5]=p,this._h[6]=U,this._h[7]=d,this._h[8]=b,this._h[9]=c},E.prototype.finish=function(s,l){l===void 0&&(l=0);var _=new Uint16Array(10),D,y,w,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(D=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=D,D=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=D*5,D=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=D,D=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=D,_[0]=this._h[0]+5,D=_[0]>>>13,_[0]&=8191,v=1;v<10;v++)_[v]=this._h[v]+D,D=_[v]>>>13,_[v]&=8191;for(_[9]-=1<<13,y=(D^1)-1,v=0;v<10;v++)_[v]&=y;for(y=~y,v=0;v<10;v++)this._h[v]=this._h[v]&y|_[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,v=1;v<8;v++)w=(this._h[v]+this._pad[v]|0)+(w>>>16)|0,this._h[v]=w&65535;return s[l+0]=this._h[0]>>>0,s[l+1]=this._h[0]>>>8,s[l+2]=this._h[1]>>>0,s[l+3]=this._h[1]>>>8,s[l+4]=this._h[2]>>>0,s[l+5]=this._h[2]>>>8,s[l+6]=this._h[3]>>>0,s[l+7]=this._h[3]>>>8,s[l+8]=this._h[4]>>>0,s[l+9]=this._h[4]>>>8,s[l+10]=this._h[5]>>>0,s[l+11]=this._h[5]>>>8,s[l+12]=this._h[6]>>>0,s[l+13]=this._h[6]>>>8,s[l+14]=this._h[7]>>>0,s[l+15]=this._h[7]>>>8,this._finished=!0,this},E.prototype.update=function(s){var l=0,_=s.length,D;if(this._leftover){D=16-this._leftover,D>_&&(D=_);for(var y=0;y<D;y++)this._buffer[this._leftover+y]=s[l+y];if(_-=D,l+=D,this._leftover+=D,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(_>=16&&(D=_-_%16,this._blocks(s,l,D),l+=D,_-=D),_){for(var y=0;y<_;y++)this._buffer[this._leftover+y]=s[l+y];this._leftover+=_}return this},E.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},E.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},E}();e.Poly1305=i;function a(E,s){var l=new i(E);l.update(s);var _=l.digest();return l.clean(),_}e.oneTimeAuth=a;function u(E,s){return E.length!==e.DIGEST_LENGTH||s.length!==e.DIGEST_LENGTH?!1:t.equal(E,s)}e.equal=u}(lr),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Je,r=lr,i=ve,a=M,u=Se;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var E=new Uint8Array(16),s=function(){function l(_){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,_.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(_)}return l.prototype.seal=function(_,D,y,w){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(_,v.length-_.length);var m=new Uint8Array(32);t.stream(this._key,v,m,4);var O=D.length+this.tagLength,p;if(w){if(w.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");p=w}else p=new Uint8Array(O);return t.streamXOR(this._key,v,D,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),m,p.subarray(0,p.length-this.tagLength),y),i.wipe(v),p},l.prototype.open=function(_,D,y,w){if(_.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(D.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(_,v.length-_.length);var m=new Uint8Array(32);t.stream(this._key,v,m,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,m,D.subarray(0,D.length-this.tagLength),y),!u.equal(O,D.subarray(D.length-this.tagLength,D.length)))return null;var p=D.length-this.tagLength,U;if(w){if(w.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");U=w}else U=new Uint8Array(p);return t.streamXOR(this._key,v,D.subarray(0,D.length-this.tagLength),U,4),i.wipe(v),U},l.prototype.clean=function(){return i.wipe(this._key),this},l.prototype._authenticate=function(_,D,y,w){var v=new r.Poly1305(D);w&&(v.update(w),w.length%16>0&&v.update(E.subarray(w.length%16))),v.update(y),y.length%16>0&&v.update(E.subarray(y.length%16));var m=new Uint8Array(8);w&&a.writeUint64LE(w.length,m),v.update(m),a.writeUint64LE(y.length,m),v.update(m);for(var O=v.digest(),p=0;p<O.length;p++)_[p]=O[p];v.clean(),i.wipe(O),i.wipe(m)},l}();e.ChaCha20Poly1305=s}(Dt);var _r={},Ve={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});function Oi(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}wt.isSerializableHash=Oi,Object.defineProperty(Ve,"__esModule",{value:!0});var me=wt,Ci=Se,Ai=ve,Dr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var a=0;a<i.length;a++)i[a]^=54;this._inner.update(i);for(var a=0;a<i.length;a++)i[a]^=106;this._outer.update(i),me.isSerializableHash(this._inner)&&me.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ai.wipe(i)}return e.prototype.reset=function(){if(!me.isSerializableHash(this._inner)||!me.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){me.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),me.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!me.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!me.isSerializableHash(this._inner)||!me.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!me.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();Ve.HMAC=Dr;function Ni(e,t,r){var i=new Dr(e,t);i.update(r);var a=i.digest();return i.clean(),a}Ve.hmac=Ni,Ve.equal=Ci.equal,Object.defineProperty(_r,"__esModule",{value:!0});var br=Ve,Er=ve,Ui=function(){function e(t,r,i,a){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var u=br.hmac(this._hash,i,r);this._hmac=new br.HMAC(t,u),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),Er.wipe(this._buffer),Er.wipe(this._counter),this._bufpos=0},e}(),Ti=_r.HKDF=Ui,et={},tt={},rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.BrowserRandomSource=void 0;const gr=65536;class Ii{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let i=0;i<r.length;i+=gr)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,gr)));return r}}rt.BrowserRandomSource=Ii;function Ri(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nt={},Fi={},Mi=Object.freeze({__proto__:null,default:Fi}),Pi=ir(Mi);Object.defineProperty(nt,"__esModule",{value:!0}),nt.NodeRandomSource=void 0;const ji=ve;class Li{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ri<"u"){const t=Pi;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let a=0;a<i.length;a++)i[a]=r[a];return(0,ji.wipe)(r),i}}nt.NodeRandomSource=Li,Object.defineProperty(tt,"__esModule",{value:!0}),tt.SystemRandomSource=void 0;const Bi=rt,$i=nt;class Vi{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Bi.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new $i.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}tt.SystemRandomSource=Vi,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=tt,r=M,i=ve;e.defaultRandomSource=new t.SystemRandomSource;function a(_,D=e.defaultRandomSource){return D.randomBytes(_)}e.randomBytes=a;function u(_=e.defaultRandomSource){const D=a(4,_),y=(0,r.readUint32LE)(D);return(0,i.wipe)(D),y}e.randomUint32=u;const E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(_,D=E,y=e.defaultRandomSource){if(D.length<2)throw new Error("randomString charset is too short");if(D.length>256)throw new Error("randomString charset is too long");let w="";const v=D.length,m=256-256%v;for(;_>0;){const O=a(Math.ceil(_*256/m),y);for(let p=0;p<O.length&&_>0;p++){const U=O[p];U<m&&(w+=D.charAt(U%v),_--)}(0,i.wipe)(O)}return w}e.randomString=s;function l(_,D=E,y=e.defaultRandomSource){const w=Math.ceil(_/(Math.log(D.length)/Math.LN2));return s(w,D,y)}e.randomStringForEntropy=l}(et);var it={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=M,r=ve;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function s(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(l,_){if(_===void 0&&(_=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var D=0;if(this._bytesHashed+=_,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&_>0;)this._buffer[this._bufferLength++]=l[D++],_--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(_>=this.blockSize&&(D=u(this._temp,this._state,l,D,_),_%=this.blockSize);_>0;)this._buffer[this._bufferLength++]=l[D++],_--;return this},s.prototype.finish=function(l){if(!this._finished){var _=this._bytesHashed,D=this._bufferLength,y=_/536870912|0,w=_<<3,v=_%64<56?64:128;this._buffer[D]=128;for(var m=D+1;m<v-8;m++)this._buffer[m]=0;t.writeUint32BE(y,this._buffer,v-8),t.writeUint32BE(w,this._buffer,v-4),u(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var m=0;m<this.digestLength/4;m++)t.writeUint32BE(this._state[m],l,m*4);return this},s.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},s}();e.SHA256=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(s,l,_,D,y){for(;y>=64;){for(var w=l[0],v=l[1],m=l[2],O=l[3],p=l[4],U=l[5],d=l[6],b=l[7],c=0;c<16;c++){var h=D+c*4;s[c]=t.readUint32BE(_,h)}for(var c=16;c<64;c++){var f=s[c-2],n=(f>>>17|f<<32-17)^(f>>>19|f<<32-19)^f>>>10;f=s[c-15];var o=(f>>>7|f<<32-7)^(f>>>18|f<<32-18)^f>>>3;s[c]=(n+s[c-7]|0)+(o+s[c-16]|0)}for(var c=0;c<64;c++){var n=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&U^~p&d)|0)+(b+(a[c]+s[c]|0)|0)|0,o=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&v^w&m^v&m)|0;b=d,d=U,U=p,p=O+n|0,O=m,m=v,v=w,w=n+o|0}l[0]+=w,l[1]+=v,l[2]+=m,l[3]+=O,l[4]+=p,l[5]+=U,l[6]+=d,l[7]+=b,D+=64,y-=64}return D}function E(s){var l=new i;l.update(s);var _=l.digest();return l.clean(),_}e.hash=E})(it);var mt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=et,r=ve;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(c){const h=new Float64Array(16);if(c)for(let f=0;f<c.length;f++)h[f]=c[f];return h}const a=new Uint8Array(32);a[0]=9;const u=i([56129,1]);function E(c){let h=1;for(let f=0;f<16;f++){let n=c[f]+h+65535;h=Math.floor(n/65536),c[f]=n-h*65536}c[0]+=h-1+37*(h-1)}function s(c,h,f){const n=~(f-1);for(let o=0;o<16;o++){const S=n&(c[o]^h[o]);c[o]^=S,h[o]^=S}}function l(c,h){const f=i(),n=i();for(let o=0;o<16;o++)n[o]=h[o];E(n),E(n),E(n);for(let o=0;o<2;o++){f[0]=n[0]-65517;for(let A=1;A<15;A++)f[A]=n[A]-65535-(f[A-1]>>16&1),f[A-1]&=65535;f[15]=n[15]-32767-(f[14]>>16&1);const S=f[15]>>16&1;f[14]&=65535,s(n,f,1-S)}for(let o=0;o<16;o++)c[2*o]=n[o]&255,c[2*o+1]=n[o]>>8}function _(c,h){for(let f=0;f<16;f++)c[f]=h[2*f]+(h[2*f+1]<<8);c[15]&=32767}function D(c,h,f){for(let n=0;n<16;n++)c[n]=h[n]+f[n]}function y(c,h,f){for(let n=0;n<16;n++)c[n]=h[n]-f[n]}function w(c,h,f){let n,o,S=0,A=0,T=0,P=0,L=0,j=0,R=0,F=0,C=0,I=0,G=0,Q=0,J=0,X=0,N=0,B=0,$=0,V=0,H=0,K=0,W=0,q=0,Y=0,x=0,k=0,Fe=0,$e=0,Ge=0,lt=0,kt=0,Wn=0,te=f[0],re=f[1],ne=f[2],ie=f[3],ae=f[4],oe=f[5],se=f[6],ue=f[7],ce=f[8],fe=f[9],he=f[10],le=f[11],de=f[12],_e=f[13],De=f[14],be=f[15];n=h[0],S+=n*te,A+=n*re,T+=n*ne,P+=n*ie,L+=n*ae,j+=n*oe,R+=n*se,F+=n*ue,C+=n*ce,I+=n*fe,G+=n*he,Q+=n*le,J+=n*de,X+=n*_e,N+=n*De,B+=n*be,n=h[1],A+=n*te,T+=n*re,P+=n*ne,L+=n*ie,j+=n*ae,R+=n*oe,F+=n*se,C+=n*ue,I+=n*ce,G+=n*fe,Q+=n*he,J+=n*le,X+=n*de,N+=n*_e,B+=n*De,$+=n*be,n=h[2],T+=n*te,P+=n*re,L+=n*ne,j+=n*ie,R+=n*ae,F+=n*oe,C+=n*se,I+=n*ue,G+=n*ce,Q+=n*fe,J+=n*he,X+=n*le,N+=n*de,B+=n*_e,$+=n*De,V+=n*be,n=h[3],P+=n*te,L+=n*re,j+=n*ne,R+=n*ie,F+=n*ae,C+=n*oe,I+=n*se,G+=n*ue,Q+=n*ce,J+=n*fe,X+=n*he,N+=n*le,B+=n*de,$+=n*_e,V+=n*De,H+=n*be,n=h[4],L+=n*te,j+=n*re,R+=n*ne,F+=n*ie,C+=n*ae,I+=n*oe,G+=n*se,Q+=n*ue,J+=n*ce,X+=n*fe,N+=n*he,B+=n*le,$+=n*de,V+=n*_e,H+=n*De,K+=n*be,n=h[5],j+=n*te,R+=n*re,F+=n*ne,C+=n*ie,I+=n*ae,G+=n*oe,Q+=n*se,J+=n*ue,X+=n*ce,N+=n*fe,B+=n*he,$+=n*le,V+=n*de,H+=n*_e,K+=n*De,W+=n*be,n=h[6],R+=n*te,F+=n*re,C+=n*ne,I+=n*ie,G+=n*ae,Q+=n*oe,J+=n*se,X+=n*ue,N+=n*ce,B+=n*fe,$+=n*he,V+=n*le,H+=n*de,K+=n*_e,W+=n*De,q+=n*be,n=h[7],F+=n*te,C+=n*re,I+=n*ne,G+=n*ie,Q+=n*ae,J+=n*oe,X+=n*se,N+=n*ue,B+=n*ce,$+=n*fe,V+=n*he,H+=n*le,K+=n*de,W+=n*_e,q+=n*De,Y+=n*be,n=h[8],C+=n*te,I+=n*re,G+=n*ne,Q+=n*ie,J+=n*ae,X+=n*oe,N+=n*se,B+=n*ue,$+=n*ce,V+=n*fe,H+=n*he,K+=n*le,W+=n*de,q+=n*_e,Y+=n*De,x+=n*be,n=h[9],I+=n*te,G+=n*re,Q+=n*ne,J+=n*ie,X+=n*ae,N+=n*oe,B+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*he,W+=n*le,q+=n*de,Y+=n*_e,x+=n*De,k+=n*be,n=h[10],G+=n*te,Q+=n*re,J+=n*ne,X+=n*ie,N+=n*ae,B+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,W+=n*he,q+=n*le,Y+=n*de,x+=n*_e,k+=n*De,Fe+=n*be,n=h[11],Q+=n*te,J+=n*re,X+=n*ne,N+=n*ie,B+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,W+=n*fe,q+=n*he,Y+=n*le,x+=n*de,k+=n*_e,Fe+=n*De,$e+=n*be,n=h[12],J+=n*te,X+=n*re,N+=n*ne,B+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,W+=n*ce,q+=n*fe,Y+=n*he,x+=n*le,k+=n*de,Fe+=n*_e,$e+=n*De,Ge+=n*be,n=h[13],X+=n*te,N+=n*re,B+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,W+=n*ue,q+=n*ce,Y+=n*fe,x+=n*he,k+=n*le,Fe+=n*de,$e+=n*_e,Ge+=n*De,lt+=n*be,n=h[14],N+=n*te,B+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,W+=n*se,q+=n*ue,Y+=n*ce,x+=n*fe,k+=n*he,Fe+=n*le,$e+=n*de,Ge+=n*_e,lt+=n*De,kt+=n*be,n=h[15],B+=n*te,$+=n*re,V+=n*ne,H+=n*ie,K+=n*ae,W+=n*oe,q+=n*se,Y+=n*ue,x+=n*ce,k+=n*fe,Fe+=n*he,$e+=n*le,Ge+=n*de,lt+=n*_e,kt+=n*De,Wn+=n*be,S+=38*$,A+=38*V,T+=38*H,P+=38*K,L+=38*W,j+=38*q,R+=38*Y,F+=38*x,C+=38*k,I+=38*Fe,G+=38*$e,Q+=38*Ge,J+=38*lt,X+=38*kt,N+=38*Wn,o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=F+o+65535,o=Math.floor(n/65536),F=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=F+o+65535,o=Math.floor(n/65536),F=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=G+o+65535,o=Math.floor(n/65536),G=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),c[0]=S,c[1]=A,c[2]=T,c[3]=P,c[4]=L,c[5]=j,c[6]=R,c[7]=F,c[8]=C,c[9]=I,c[10]=G,c[11]=Q,c[12]=J,c[13]=X,c[14]=N,c[15]=B}function v(c,h){w(c,h,h)}function m(c,h){const f=i();for(let n=0;n<16;n++)f[n]=h[n];for(let n=253;n>=0;n--)v(f,f),n!==2&&n!==4&&w(f,f,h);for(let n=0;n<16;n++)c[n]=f[n]}function O(c,h){const f=new Uint8Array(32),n=new Float64Array(80),o=i(),S=i(),A=i(),T=i(),P=i(),L=i();for(let C=0;C<31;C++)f[C]=c[C];f[31]=c[31]&127|64,f[0]&=248,_(n,h);for(let C=0;C<16;C++)S[C]=n[C];o[0]=T[0]=1;for(let C=254;C>=0;--C){const I=f[C>>>3]>>>(C&7)&1;s(o,S,I),s(A,T,I),D(P,o,A),y(o,o,A),D(A,S,T),y(S,S,T),v(T,P),v(L,o),w(o,A,o),w(A,S,P),D(P,o,A),y(o,o,A),v(S,o),y(A,T,L),w(o,A,u),D(o,o,T),w(A,A,o),w(o,T,L),w(T,S,n),v(S,P),s(o,S,I),s(A,T,I)}for(let C=0;C<16;C++)n[C+16]=o[C],n[C+32]=A[C],n[C+48]=S[C],n[C+64]=T[C];const j=n.subarray(32),R=n.subarray(16);m(j,j),w(R,R,j);const F=new Uint8Array(32);return l(F,R),F}e.scalarMult=O;function p(c){return O(c,a)}e.scalarMultBase=p;function U(c){if(c.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const h=new Uint8Array(c);return{publicKey:p(h),secretKey:h}}e.generateKeyPairFromSeed=U;function d(c){const h=(0,t.randomBytes)(32,c),f=U(h);return(0,r.wipe)(h),f}e.generateKeyPair=d;function b(c,h,f=!1){if(c.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(h.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const n=O(c,h);if(f){let o=0;for(let S=0;S<n.length;S++)o|=n[S];if(o===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=b})(mt);function vr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function yr(e,t){t||(t=e.reduce((a,u)=>a+u.length,0));const r=vr(t);let i=0;for(const a of e)r.set(a,i),i+=a.length;return r}function Hi(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<e.length;a++){var u=e.charAt(a),E=u.charCodeAt(0);if(r[E]!==255)throw new TypeError(u+" is ambiguous");r[E]=a}var s=e.length,l=e.charAt(0),_=Math.log(s)/Math.log(256),D=Math.log(256)/Math.log(s);function y(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var O=0,p=0,U=0,d=m.length;U!==d&&m[U]===0;)U++,O++;for(var b=(d-U)*D+1>>>0,c=new Uint8Array(b);U!==d;){for(var h=m[U],f=0,n=b-1;(h!==0||f<p)&&n!==-1;n--,f++)h+=256*c[n]>>>0,c[n]=h%s>>>0,h=h/s>>>0;if(h!==0)throw new Error("Non-zero carry");p=f,U++}for(var o=b-p;o!==b&&c[o]===0;)o++;for(var S=l.repeat(O);o<b;++o)S+=e.charAt(c[o]);return S}function w(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var O=0;if(m[O]!==" "){for(var p=0,U=0;m[O]===l;)p++,O++;for(var d=(m.length-O)*_+1>>>0,b=new Uint8Array(d);m[O];){var c=r[m.charCodeAt(O)];if(c===255)return;for(var h=0,f=d-1;(c!==0||h<U)&&f!==-1;f--,h++)c+=s*b[f]>>>0,b[f]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");U=h,O++}if(m[O]!==" "){for(var n=d-U;n!==d&&b[n]===0;)n++;for(var o=new Uint8Array(p+(d-n)),S=p;n!==d;)o[S++]=b[n++];return o}}}function v(m){var O=w(m);if(O)return O;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:w,decode:v}}var Ki=Hi,Wi=Ki;const wr=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},qi=e=>new TextEncoder().encode(e),zi=e=>new TextDecoder().decode(e);class Yi{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class xi{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return mr(this,t)}}class Gi{constructor(t){this.decoders=t}or(t){return mr(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mr=(e,t)=>new Gi({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ki{constructor(t,r,i,a){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new Yi(t,r,i),this.decoder=new xi(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const at=({name:e,prefix:t,encode:r,decode:i})=>new ki(e,t,r,i),He=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=Wi(r,t);return at({prefix:e,name:t,encode:i,decode:u=>wr(a(u))})},Xi=(e,t,r,i)=>{const a={};for(let D=0;D<t.length;++D)a[t[D]]=D;let u=e.length;for(;e[u-1]==="=";)--u;const E=new Uint8Array(u*r/8|0);let s=0,l=0,_=0;for(let D=0;D<u;++D){const y=a[e[D]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<r|y,s+=r,s>=8&&(s-=8,E[_++]=255&l>>s)}if(s>=r||255&l<<8-s)throw new SyntaxError("Unexpected end of data");return E},Ji=(e,t,r)=>{const i=t[t.length-1]==="=",a=(1<<r)-1;let u="",E=0,s=0;for(let l=0;l<e.length;++l)for(s=s<<8|e[l],E+=8;E>r;)E-=r,u+=t[a&s>>E];if(E&&(u+=t[a&s<<r-E]),i)for(;u.length*r&7;)u+="=";return u},Z=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>at({prefix:t,name:e,encode(a){return Ji(a,i,r)},decode(a){return Xi(a,i,r,e)}}),Qi=at({prefix:"\0",name:"identity",encode:e=>zi(e),decode:e=>qi(e)});var Zi=Object.freeze({__proto__:null,identity:Qi});const ea=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ta=Object.freeze({__proto__:null,base2:ea});const ra=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var na=Object.freeze({__proto__:null,base8:ra});const ia=He({prefix:"9",name:"base10",alphabet:"0123456789"});var aa=Object.freeze({__proto__:null,base10:ia});const oa=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sa=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ua=Object.freeze({__proto__:null,base16:oa,base16upper:sa});const ca=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fa=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ha=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),la=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),da=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_a=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Da=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ba=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ea=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ga=Object.freeze({__proto__:null,base32:ca,base32upper:fa,base32pad:ha,base32padupper:la,base32hex:da,base32hexupper:_a,base32hexpad:Da,base32hexpadupper:ba,base32z:Ea});const va=He({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ya=He({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wa=Object.freeze({__proto__:null,base36:va,base36upper:ya});const ma=He({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pa=He({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Sa=Object.freeze({__proto__:null,base58btc:ma,base58flickr:pa});const Oa=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ca=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Aa=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Na=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ua=Object.freeze({__proto__:null,base64:Oa,base64pad:Ca,base64url:Aa,base64urlpad:Na});const pr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ta=pr.reduce((e,t,r)=>(e[r]=t,e),[]),Ia=pr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Ra(e){return e.reduce((t,r)=>(t+=Ta[r],t),"")}function Fa(e){const t=[];for(const r of e){const i=Ia[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const Ma=at({prefix:"\u{1F680}",name:"base256emoji",encode:Ra,decode:Fa});var Pa=Object.freeze({__proto__:null,base256emoji:Ma}),ja=Or,Sr=128,La=127,Ba=~La,$a=Math.pow(2,31);function Or(e,t,r){t=t||[],r=r||0;for(var i=r;e>=$a;)t[r++]=e&255|Sr,e/=128;for(;e&Ba;)t[r++]=e&255|Sr,e>>>=7;return t[r]=e|0,Or.bytes=r-i+1,t}var Va=pt,Ha=128,Cr=127;function pt(e,i){var r=0,i=i||0,a=0,u=i,E,s=e.length;do{if(u>=s)throw pt.bytes=0,new RangeError("Could not decode varint");E=e[u++],r+=a<28?(E&Cr)<<a:(E&Cr)*Math.pow(2,a),a+=7}while(E>=Ha);return pt.bytes=u-i,r}var Ka=Math.pow(2,7),Wa=Math.pow(2,14),qa=Math.pow(2,21),za=Math.pow(2,28),Ya=Math.pow(2,35),xa=Math.pow(2,42),Ga=Math.pow(2,49),ka=Math.pow(2,56),Xa=Math.pow(2,63),Ja=function(e){return e<Ka?1:e<Wa?2:e<qa?3:e<za?4:e<Ya?5:e<xa?6:e<Ga?7:e<ka?8:e<Xa?9:10},Qa={encode:ja,decode:Va,encodingLength:Ja},Ar=Qa;const Nr=(e,t,r=0)=>(Ar.encode(e,t,r),t),Ur=e=>Ar.encodingLength(e),St=(e,t)=>{const r=t.byteLength,i=Ur(e),a=i+Ur(r),u=new Uint8Array(a+r);return Nr(e,u,0),Nr(r,u,i),u.set(t,a),new Za(e,r,t,u)};class Za{constructor(t,r,i,a){this.code=t,this.size=r,this.digest=i,this.bytes=a}}const Tr=({name:e,code:t,encode:r})=>new eo(e,t,r);class eo{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?St(this.code,r):r.then(i=>St(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Ir=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),to=Tr({name:"sha2-256",code:18,encode:Ir("SHA-256")}),ro=Tr({name:"sha2-512",code:19,encode:Ir("SHA-512")});var no=Object.freeze({__proto__:null,sha256:to,sha512:ro});const Rr=0,io="identity",Fr=wr;var ao=Object.freeze({__proto__:null,identity:{code:Rr,name:io,encode:Fr,digest:e=>St(Rr,Fr(e))}});new TextEncoder,new TextDecoder;const Mr={...Zi,...ta,...na,...aa,...ua,...ga,...wa,...Sa,...Ua,...Pa};({...no,...ao});function Pr(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const jr=Pr("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ot=Pr("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=vr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Lr={utf8:jr,"utf-8":jr,hex:Mr.base16,latin1:Ot,ascii:Ot,binary:Ot,...Mr};function ye(e,t="utf8"){const r=Lr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function we(e,t="utf8"){const r=Lr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const Ct="base10",Ee="base16",ot="base64pad",st="utf8",At=0,Me=1,oo=0,Br=1,Nt=12,Ut=32;function so(){const e=mt.generateKeyPair();return{privateKey:we(e.secretKey,Ee),publicKey:we(e.publicKey,Ee)}}function uo(){const e=et.randomBytes(Ut);return we(e,Ee)}function co(e,t){const r=mt.sharedKey(ye(e,Ee),ye(t,Ee)),i=new Ti(it.SHA256,r).expand(Ut);return we(i,Ee)}function $r(e){const t=it.hash(ye(e,Ee));return we(t,Ee)}function fo(e){const t=it.hash(ye(e,st));return we(t,Ee)}function Vr(e){return ye(`${e}`,Ct)}function Ke(e){return Number(we(e,Ct))}function ho(e){const t=Vr(typeof e.type<"u"?e.type:At);if(Ke(t)===Me&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?ye(e.senderPublicKey,Ee):void 0,i=typeof e.iv<"u"?ye(e.iv,Ee):et.randomBytes(Nt),a=new Dt.ChaCha20Poly1305(ye(e.symKey,Ee)).seal(i,ye(e.message,st));return Hr({type:t,sealed:a,iv:i,senderPublicKey:r})}function lo(e){const t=new Dt.ChaCha20Poly1305(ye(e.symKey,Ee)),{sealed:r,iv:i}=Tt(e.encoded),a=t.open(i,r);if(a===null)throw new Error("Failed to decrypt");return we(a,st)}function Hr(e){if(Ke(e.type)===Me){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return we(yr([e.type,e.senderPublicKey,e.iv,e.sealed]),ot)}return we(yr([e.type,e.iv,e.sealed]),ot)}function Tt(e){const t=ye(e,ot),r=t.slice(oo,Br),i=Br;if(Ke(r)===Me){const s=i+Ut,l=s+Nt,_=t.slice(i,s),D=t.slice(s,l),y=t.slice(l);return{type:r,sealed:y,iv:D,senderPublicKey:_}}const a=i+Nt,u=t.slice(i,a),E=t.slice(a);return{type:r,sealed:E,iv:u}}function _o(e,t){const r=Tt(e);return Kr({type:Ke(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?we(r.senderPublicKey,Ee):void 0,receiverPublicKey:t?.receiverPublicKey})}function Kr(e){const t=e?.type||At;if(t===Me){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Do(e){return e.type===Me&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Wr=function(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},bo=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),Eo=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),go=function(){function e(t,r,i,a){this.name=t,this.version=r,this.os=i,this.bot=a,this.type="bot-device"}return e}(),vo=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),yo=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),wo=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,qr=3,po=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wo]],zr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function So(e){return e?Yr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new yo:typeof navigator<"u"?Yr(navigator.userAgent):Ao()}function Oo(e){return e!==""&&po.reduce(function(t,r){var i=r[0],a=r[1];if(t)return t;var u=a.exec(e);return!!u&&[i,u]},!1)}function Yr(e){var t=Oo(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new vo;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<qr&&(a=Wr(Wr([],a,!0),No(qr-a.length),!0)):a=[];var u=a.join("."),E=Co(e),s=mo.exec(e);return s&&s[1]?new go(r,u,E,s[1]):new bo(r,u,E)}function Co(e){for(var t=0,r=zr.length;t<r;t++){var i=zr[t],a=i[0],u=i[1],E=u.exec(e);if(E)return a}return null}function Ao(){var e=typeof process<"u"&&process.version;return e?new Eo(process.version.slice(1)):null}function No(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Ne={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var It=function(e,t){return It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},It(e,t)};function Uo(e,t){It(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Rt=function(){return Rt=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Rt.apply(this,arguments)};function To(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function Io(e,t,r,i){var a=arguments.length,u=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(E=e[s])&&(u=(a<3?E(u):a>3?E(t,r,u):E(t,r))||u);return a>3&&u&&Object.defineProperty(t,r,u),u}function Ro(e,t){return function(r,i){t(r,i,e)}}function Fo(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Mo(e,t,r,i){function a(u){return u instanceof r?u:new r(function(E){E(u)})}return new(r||(r=Promise))(function(u,E){function s(D){try{_(i.next(D))}catch(y){E(y)}}function l(D){try{_(i.throw(D))}catch(y){E(y)}}function _(D){D.done?u(D.value):a(D.value).then(s,l)}_((i=i.apply(e,t||[])).next())})}function Po(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,E;return E={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function s(_){return function(D){return l([_,D])}}function l(_){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=_[0]&2?a.return:_[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,_[1])).done)return u;switch(a=0,u&&(_=[_[0]&2,u.value]),_[0]){case 0:case 1:u=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,a=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!u||_[1]>u[0]&&_[1]<u[3])){r.label=_[1];break}if(_[0]===6&&r.label<u[1]){r.label=u[1],u=_;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(_);break}u[2]&&r.ops.pop(),r.trys.pop();continue}_=t.call(e,r)}catch(D){_=[6,D],a=0}finally{i=u=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function jo(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function Lo(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Ft(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),a,u=[],E;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(s){E={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(E)throw E.error}}return u}function Bo(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xr(arguments[t]));return e}function $o(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<r;t++)for(var u=arguments[t],E=0,s=u.length;E<s;E++,a++)i[a]=u[E];return i}function We(e){return this instanceof We?(this.v=e,this):new We(e)}function Vo(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),a,u=[];return a={},E("next"),E("throw"),E("return"),a[Symbol.asyncIterator]=function(){return this},a;function E(w){i[w]&&(a[w]=function(v){return new Promise(function(m,O){u.push([w,v,m,O])>1||s(w,v)})})}function s(w,v){try{l(i[w](v))}catch(m){y(u[0][3],m)}}function l(w){w.value instanceof We?Promise.resolve(w.value.v).then(_,D):y(u[0][2],w)}function _(w){s("next",w)}function D(w){s("throw",w)}function y(w,v){w(v),u.shift(),u.length&&s(u[0][0],u[0][1])}}function Ho(e){var t,r;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=e[a]?function(E){return(r=!r)?{value:We(e[a](E)),done:a==="return"}:u?u(E):E}:u}}function Ko(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ft=="function"?Ft(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=e[u]&&function(E){return new Promise(function(s,l){E=e[u](E),a(s,l,E.done,E.value)})}}function a(u,E,s,l){Promise.resolve(l).then(function(_){u({value:_,done:s})},E)}}function Wo(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function qo(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function zo(e){return e&&e.__esModule?e:{default:e}}function Yo(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function xo(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var Go=Object.freeze({__proto__:null,__extends:Uo,get __assign(){return Rt},__rest:To,__decorate:Io,__param:Ro,__metadata:Fo,__awaiter:Mo,__generator:Po,__createBinding:jo,__exportStar:Lo,__values:Ft,__read:xr,__spread:Bo,__spreadArrays:$o,__await:We,__asyncGenerator:Vo,__asyncDelegator:Ho,__asyncValues:Ko,__makeTemplateObject:Wo,__importStar:qo,__importDefault:zo,__classPrivateFieldGet:Yo,__classPrivateFieldSet:xo}),ut=ir(Go),Mt={},qe={},Gr;function ko(){if(Gr)return qe;Gr=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return qe.delay=e,qe}var Ue={},Pt={},Te={},kr;function Xo(){return kr||(kr=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.ONE_THOUSAND=Te.ONE_HUNDRED=void 0,Te.ONE_HUNDRED=100,Te.ONE_THOUSAND=1e3),Te}var jt={},Xr;function Jo(){return Xr||(Xr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(jt)),jt}var Jr;function Qr(){return Jr||(Jr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ut;t.__exportStar(Xo(),e),t.__exportStar(Jo(),e)}(Pt)),Pt}var Zr;function Qo(){if(Zr)return Ue;Zr=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.fromMiliseconds=Ue.toMiliseconds=void 0;const e=Qr();function t(i){return i*e.ONE_THOUSAND}Ue.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return Ue.fromMiliseconds=r,Ue}var en;function Zo(){return en||(en=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ut;t.__exportStar(ko(),e),t.__exportStar(Qo(),e)}(Mt)),Mt}var Pe={},tn;function es(){if(tn)return Pe;tn=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:a})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Pe.Watch=e,Pe.default=e,Pe}var Lt={},ze={},rn;function ts(){if(rn)return ze;rn=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.IWatch=void 0;class e{}return ze.IWatch=e,ze}var nn;function rs(){return nn||(nn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ut.__exportStar(ts(),e)}(Lt)),Lt}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ut;t.__exportStar(Zo(),e),t.__exportStar(es(),e),t.__exportStar(rs(),e),t.__exportStar(Qr(),e)})(Ne);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=$t=z.getLocation=z.getLocationOrThrow=Bt=z.getNavigator=z.getNavigatorOrThrow=an=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Ie(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Ie;function je(e){const t=Ie(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=je;function ns(){return je("document")}z.getDocumentOrThrow=ns;function is(){return Ie("document")}var an=z.getDocument=is;function as(){return je("navigator")}z.getNavigatorOrThrow=as;function os(){return Ie("navigator")}var Bt=z.getNavigator=os;function ss(){return je("location")}z.getLocationOrThrow=ss;function us(){return Ie("location")}var $t=z.getLocation=us;function cs(){return je("crypto")}z.getCryptoOrThrow=cs;function fs(){return Ie("crypto")}z.getCrypto=fs;function hs(){return je("localStorage")}z.getLocalStorageOrThrow=hs;function ls(){return Ie("localStorage")}z.getLocalStorage=ls;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var on=Vt.getWindowMetadata=void 0;const sn=z;function ds(){let e,t;try{e=sn.getDocumentOrThrow(),t=sn.getLocationOrThrow()}catch{return null}function r(){const y=e.getElementsByTagName("link"),w=[];for(let v=0;v<y.length;v++){const m=y[v],O=m.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const p=m.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(p.indexOf("/")===0)U+=p;else{const d=t.pathname.split("/");d.pop();const b=d.join("/");U+=b+"/"+p}w.push(U)}else if(p.indexOf("//")===0){const U=t.protocol+p;w.push(U)}else w.push(p)}}return w}function i(...y){const w=e.getElementsByTagName("meta");for(let v=0;v<w.length;v++){const m=w[v],O=["itemprop","property","name"].map(p=>m.getAttribute(p)).filter(p=>p?y.includes(p):!1);if(O.length&&O){const p=m.getAttribute("content");if(p)return p}}return""}function a(){let y=i("name","og:site_name","og:title","twitter:title");return y||(y=e.title),y}function u(){return i("description","og:description","twitter:description","keywords")}const E=a(),s=u(),l=t.origin,_=r();return{description:s,url:l,icons:_,name:E}}on=Vt.getWindowMetadata=ds;var Ye={},_s=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),un="%[a-f0-9]{2}",cn=new RegExp("("+un+")|([^%]+?)","gi"),fn=new RegExp("("+un+")+","gi");function Ht(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],Ht(r),Ht(i))}function Ds(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(cn)||[],r=1;r<t.length;r++)e=Ht(t,r).join(""),t=e.match(cn)||[];return e}}function bs(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=fn.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=Ds(r[0]);i!==r[0]&&(t[r[0]]=i)}r=fn.exec(e)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),u=0;u<a.length;u++){var E=a[u];e=e.replace(new RegExp(E,"g"),t[E])}return e}var Es=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return bs(e)}},gs=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},vs=function(e,t){for(var r={},i=Object.keys(e),a=Array.isArray(t),u=0;u<i.length;u++){var E=i[u],s=e[E];(a?t.indexOf(E)!==-1:t(E,s,e))&&(r[E]=s)}return r};(function(e){const t=_s,r=Es,i=gs,a=vs,u=d=>d==null,E=Symbol("encodeFragmentIdentifier");function s(d){switch(d.arrayFormat){case"index":return b=>(c,h)=>{const f=c.length;return h===void 0||d.skipNull&&h===null||d.skipEmptyString&&h===""?c:h===null?[...c,[D(b,d),"[",f,"]"].join("")]:[...c,[D(b,d),"[",D(f,d),"]=",D(h,d)].join("")]};case"bracket":return b=>(c,h)=>h===void 0||d.skipNull&&h===null||d.skipEmptyString&&h===""?c:h===null?[...c,[D(b,d),"[]"].join("")]:[...c,[D(b,d),"[]=",D(h,d)].join("")];case"colon-list-separator":return b=>(c,h)=>h===void 0||d.skipNull&&h===null||d.skipEmptyString&&h===""?c:h===null?[...c,[D(b,d),":list="].join("")]:[...c,[D(b,d),":list=",D(h,d)].join("")];case"comma":case"separator":case"bracket-separator":{const b=d.arrayFormat==="bracket-separator"?"[]=":"=";return c=>(h,f)=>f===void 0||d.skipNull&&f===null||d.skipEmptyString&&f===""?h:(f=f===null?"":f,h.length===0?[[D(c,d),b,D(f,d)].join("")]:[[h,D(f,d)].join(d.arrayFormatSeparator)])}default:return b=>(c,h)=>h===void 0||d.skipNull&&h===null||d.skipEmptyString&&h===""?c:h===null?[...c,D(b,d)]:[...c,[D(b,d),"=",D(h,d)].join("")]}}function l(d){let b;switch(d.arrayFormat){case"index":return(c,h,f)=>{if(b=/\[(\d*)\]$/.exec(c),c=c.replace(/\[\d*\]$/,""),!b){f[c]=h;return}f[c]===void 0&&(f[c]={}),f[c][b[1]]=h};case"bracket":return(c,h,f)=>{if(b=/(\[\])$/.exec(c),c=c.replace(/\[\]$/,""),!b){f[c]=h;return}if(f[c]===void 0){f[c]=[h];return}f[c]=[].concat(f[c],h)};case"colon-list-separator":return(c,h,f)=>{if(b=/(:list)$/.exec(c),c=c.replace(/:list$/,""),!b){f[c]=h;return}if(f[c]===void 0){f[c]=[h];return}f[c]=[].concat(f[c],h)};case"comma":case"separator":return(c,h,f)=>{const n=typeof h=="string"&&h.includes(d.arrayFormatSeparator),o=typeof h=="string"&&!n&&y(h,d).includes(d.arrayFormatSeparator);h=o?y(h,d):h;const S=n||o?h.split(d.arrayFormatSeparator).map(A=>y(A,d)):h===null?h:y(h,d);f[c]=S};case"bracket-separator":return(c,h,f)=>{const n=/(\[\])$/.test(c);if(c=c.replace(/\[\]$/,""),!n){f[c]=h&&y(h,d);return}const o=h===null?[]:h.split(d.arrayFormatSeparator).map(S=>y(S,d));if(f[c]===void 0){f[c]=o;return}f[c]=[].concat(f[c],o)};default:return(c,h,f)=>{if(f[c]===void 0){f[c]=h;return}f[c]=[].concat(f[c],h)}}}function _(d){if(typeof d!="string"||d.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(d,b){return b.encode?b.strict?t(d):encodeURIComponent(d):d}function y(d,b){return b.decode?r(d):d}function w(d){return Array.isArray(d)?d.sort():typeof d=="object"?w(Object.keys(d)).sort((b,c)=>Number(b)-Number(c)).map(b=>d[b]):d}function v(d){const b=d.indexOf("#");return b!==-1&&(d=d.slice(0,b)),d}function m(d){let b="";const c=d.indexOf("#");return c!==-1&&(b=d.slice(c)),b}function O(d){d=v(d);const b=d.indexOf("?");return b===-1?"":d.slice(b+1)}function p(d,b){return b.parseNumbers&&!Number.isNaN(Number(d))&&typeof d=="string"&&d.trim()!==""?d=Number(d):b.parseBooleans&&d!==null&&(d.toLowerCase()==="true"||d.toLowerCase()==="false")&&(d=d.toLowerCase()==="true"),d}function U(d,b){b=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},b),_(b.arrayFormatSeparator);const c=l(b),h=Object.create(null);if(typeof d!="string"||(d=d.trim().replace(/^[?#&]/,""),!d))return h;for(const f of d.split("&")){if(f==="")continue;let[n,o]=i(b.decode?f.replace(/\+/g," "):f,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(b.arrayFormat)?o:y(o,b),c(y(n,b),o,h)}for(const f of Object.keys(h)){const n=h[f];if(typeof n=="object"&&n!==null)for(const o of Object.keys(n))n[o]=p(n[o],b);else h[f]=p(n,b)}return b.sort===!1?h:(b.sort===!0?Object.keys(h).sort():Object.keys(h).sort(b.sort)).reduce((f,n)=>{const o=h[n];return Boolean(o)&&typeof o=="object"&&!Array.isArray(o)?f[n]=w(o):f[n]=o,f},Object.create(null))}e.extract=O,e.parse=U,e.stringify=(d,b)=>{if(!d)return"";b=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},b),_(b.arrayFormatSeparator);const c=o=>b.skipNull&&u(d[o])||b.skipEmptyString&&d[o]==="",h=s(b),f={};for(const o of Object.keys(d))c(o)||(f[o]=d[o]);const n=Object.keys(f);return b.sort!==!1&&n.sort(b.sort),n.map(o=>{const S=d[o];return S===void 0?"":S===null?D(o,b):Array.isArray(S)?S.length===0&&b.arrayFormat==="bracket-separator"?D(o,b)+"[]":S.reduce(h(o),[]).join("&"):D(o,b)+"="+D(S,b)}).filter(o=>o.length>0).join("&")},e.parseUrl=(d,b)=>{b=Object.assign({decode:!0},b);const[c,h]=i(d,"#");return Object.assign({url:c.split("?")[0]||"",query:U(O(d),b)},b&&b.parseFragmentIdentifier&&h?{fragmentIdentifier:y(h,b)}:{})},e.stringifyUrl=(d,b)=>{b=Object.assign({encode:!0,strict:!0,[E]:!0},b);const c=v(d.url).split("?")[0]||"",h=e.extract(d.url),f=e.parse(h,{sort:!1}),n=Object.assign(f,d.query);let o=e.stringify(n,b);o&&(o=`?${o}`);let S=m(d.url);return d.fragmentIdentifier&&(S=`#${b[E]?D(d.fragmentIdentifier,b):d.fragmentIdentifier}`),`${c}${o}${S}`},e.pick=(d,b,c)=>{c=Object.assign({parseFragmentIdentifier:!0,[E]:!1},c);const{url:h,query:f,fragmentIdentifier:n}=e.parseUrl(d,c);return e.stringifyUrl({url:h,query:a(f,b),fragmentIdentifier:n},c)},e.exclude=(d,b,c)=>{const h=Array.isArray(b)?f=>!b.includes(f):(f,n)=>!b(f,n);return e.pick(d,h,c)}})(Ye);var ys=Object.defineProperty,hn=Object.getOwnPropertySymbols,ws=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,ln=(e,t,r)=>t in e?ys(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dn=(e,t)=>{for(var r in t||(t={}))ws.call(t,r)&&ln(e,r,t[r]);if(hn)for(var r of hn(t))ms.call(t,r)&&ln(e,r,t[r]);return e};const _n="ReactNative",Le={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ct=" ",ps=":",Dn="/",Kt=2,Ss=1e3,bn="js";function Wt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function En(){return!an()&&!!Bt()&&navigator.product===_n}function gn(){return!Wt()&&!!Bt()}function qt(){return En()?Le.reactNative:Wt()?Le.node:gn()?Le.browser:Le.unknown}function vn(e,t){let r=Ye.parse(e);return r=dn(dn({},r),t),e=Ye.stringify(r),e}function Os(){return on()||{name:"",description:"",url:"",icons:[""]}}function Cs(e,t){var r;const i=qt(),a={protocol:e,version:t,env:i};return i==="browser"&&(a.host=((r=$t())==null?void 0:r.host)||"unknown"),a}function yn(){const e=So();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function wn(){var e;const t=qt();return t===Le.browser?[t,((e=$t())==null?void 0:e.host)||"unknown"].join(":"):t}function mn(e,t,r){const i=yn(),a=wn();return[[e,t].join("-"),[bn,r].join("-"),i,a].join("/")}function As({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:a,projectId:u}){const E=r.split("?"),s=mn(e,t,i),l={auth:a,ua:s,projectId:u},_=vn(E[1]||"",l);return E[0]+"?"+_}function Ns(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function Us(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function pn(e,t=Kt){return Sn(e.split(Dn),t)}function Ts(e){return pn(e).join(ct)}function Oe(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Sn(e,t=Kt){return e.slice(Math.max(e.length-t,0))}function Is(e){return Object.fromEntries(e.entries())}function Rs(e){return new Map(Object.entries(e))}function Fs(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const Ms=e=>e;function On(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Ps(e){return e.split(ct).map(t=>On(t)).join(ct)}function js(e=Ne.FIVE_MINUTES,t){const r=Ne.toMiliseconds(e||Ne.FIVE_MINUTES);let i,a,u;return{resolve:E=>{u&&i&&(clearTimeout(u),i(E))},reject:E=>{u&&a&&(clearTimeout(u),a(E))},done:()=>new Promise((E,s)=>{u=setTimeout(()=>{s(new Error(t))},r),i=E,a=s})}}function Ls(e,t){return new Promise(async(r,i)=>{const a=setTimeout(()=>i(),t),u=await e;clearTimeout(a),r(u)})}function zt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Bs(e){return zt("topic",e)}function $s(e){return zt("id",e)}function Vs(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function Hs(e,t){return Ne.fromMiliseconds((t||Date.now())+Ne.toMiliseconds(e))}function Ks(e){return Date.now()>=Ne.toMiliseconds(e)}function Ws(e,t){return`${e}${t?`:${t}`:""}`}const qs={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Cn="irn";function zs(e){return e?.relay||{protocol:Cn}}function Ys(e){const t=qs[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var xs=Object.defineProperty,An=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,ks=Object.prototype.propertyIsEnumerable,Nn=(e,t,r)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xs=(e,t)=>{for(var r in t||(t={}))Gs.call(t,r)&&Nn(e,r,t[r]);if(An)for(var r of An(t))ks.call(t,r)&&Nn(e,r,t[r]);return e};function Un(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(a=>{if(a.startsWith(i)){const u=a.replace(i,""),E=e[a];r[u]=E}}),r}function Js(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),a=e.substring(t+1,r).split("@"),u=a[0],E=typeof r<"u"?e.substring(r):"",s=Ye.parse(E),l=s.symKey;if(l.length!==64)throw new Error(`Invalid symKey: ${l}`);const _=$r(l);if(u!==_)throw new Error(`Invalid topic: ${u}`);return{protocol:i,topic:u,version:parseInt(a[1],10),symKey:l,relay:Un(s)}}function Tn(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(a=>{const u=r+t+a;e[a]&&(i[u]=e[a])}),i}function Qs(e){return`${e.protocol}:${e.topic}@${e.version}?`+Ye.stringify(Xs({symKey:e.symKey},Tn(e.relay)))}function Be(e){const t=[];return e.forEach(r=>{const[i,a]=r.split(":");t.push(`${i}:${a}`)}),t}function In(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Be(r.accounts))}),t}function Rn(e,t){const r=[];return Object.values(e).forEach(i=>{Be(i.accounts).includes(t)&&r.push(...i.methods)}),r}function Fn(e,t){const r=[];return Object.values(e).forEach(i=>{Be(i.accounts).includes(t)&&r.push(...i.events)}),r}function Zs(e,t){const r=Vn(e,t);if(r)throw new Error(r.message);const i={};for(const[a,u]of Object.entries(e))i[a]={methods:u.methods,events:u.events,chains:u.accounts.map(E=>`${E.split(":")[0]}:${E.split(":")[1]}`)};return i}const eu={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ce(e,t){const{message:r,code:i}=tu[e];return{message:t?`${r} ${t}`:r,code:i}}function Re(e,t){const{message:r,code:i}=eu[e];return{message:t?`${r} ${t}`:r,code:i}}function xe(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Yt(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ae(e){return typeof e>"u"}function ge(e,t){return t&&Ae(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function ft(e,t){return t&&Ae(e)?!0:typeof e=="number"&&!isNaN(e)}function ru(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),a=Object.keys(r);let u=!0;return Oe(a,i)?(i.forEach(E=>{const{accounts:s,methods:l,events:_}=e.namespaces[E],D=Be(s),y=r[E];(!Oe(ke(E,y),D)||!Oe(y.methods,l)||!Oe(y.events,_))&&(u=!1)}),u):!1}function ht(e){return ge(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Mn(e){if(ge(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&ht(r)}}return!1}function nu(e){if(ge(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function iu(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function au(e){return e?.topic}function ou(e,t){let r=null;return ge(e?.publicKey,!1)||(r=Ce("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function xt(e){let t=!0;return xe(e)?e.length&&(t=e.every(r=>ge(r,!1))):t=!1,t}function Pn(e,t,r){let i=null;return xe(t)?t.forEach(a=>{i||(!ht(a)||!a.includes(e))&&(i=Re("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):i=Re("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),i}function jn(e,t){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const u=Pn(i,ke(i,a),`${t} requiredNamespace`);u&&(r=u)}),r}function Ln(e,t){let r=null;return xe(e)?e.forEach(i=>{r||Mn(i)||(r=Re("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Re("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Bn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=Ln(i?.accounts,`${t} namespace`);a&&(r=a)}),r}function $n(e,t){let r=null;return xt(e?.methods)?xt(e?.events)||(r=Re("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Re("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Gt(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=$n(i,`${t}, namespace`);a&&(r=a)}),r}function su(e,t,r){let i=null;if(e&&Yt(e)){const a=Gt(e,t);a&&(i=a);const u=jn(e,t);u&&(i=u)}else i=Ce("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function Vn(e,t){let r=null;if(e&&Yt(e)){const i=Gt(e,t);i&&(r=i);const a=Bn(e,t);a&&(r=a)}else r=Ce("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Hn(e){return ge(e.protocol,!0)}function uu(e,t){let r=!1;return t&&!e?r=!0:e&&xe(e)&&e.length&&e.forEach(i=>{r=Hn(i)}),r}function cu(e){return typeof e=="number"}function fu(e){return typeof e<"u"&&typeof e!==null}function hu(e){return!(!e||typeof e!="object"||!e.code||!ft(e.code,!1)||!e.message||!ge(e.message,!1))}function lu(e){return!(Ae(e)||!ge(e.method,!1))}function du(e){return!(Ae(e)||Ae(e.result)&&Ae(e.error)||!ft(e.id,!1)||!ge(e.jsonrpc,!1))}function _u(e){return!(Ae(e)||!ge(e.name,!1))}function Du(e,t){return!(!ht(t)||!In(e).includes(t))}function bu(e,t,r){return ge(r,!1)?Rn(e,t).includes(r):!1}function Eu(e,t,r){return ge(r,!1)?Fn(e,t).includes(r):!1}function gu(e,t,r){let i=null;const a=vu(e),u=yu(t),E=Object.keys(a),s=Object.keys(u),l=Kn(Object.keys(e)),_=Kn(Object.keys(t)),D=l.filter(y=>!_.includes(y));return D.length&&(i=Ce("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${D.toString()}
      Received: ${Object.keys(t).toString()}`)),Oe(E,s)||(i=Ce("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${E.toString()}
      Approved: ${s.toString()}`)),E.forEach(y=>{i||(Oe(a[y].methods,u[y].methods)?Oe(a[y].events,u[y].events)||(i=Ce("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${y}`)):i=Ce("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${y}`))}),i}function vu(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(a=>{t[a]={methods:e[r].methods,events:e[r].events}})}),t}function Kn(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function yu(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=Be(e[r].accounts);i?.forEach(a=>{t[a]={accounts:e[r].accounts.filter(u=>u.includes(`${a}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function wu(e,t){return ft(e,!1)&&e<=t.max&&e>=t.min}g.BASE10=Ct,g.BASE16=Ee,g.BASE64=ot,g.COLON=ps,g.DEFAULT_DEPTH=Kt,g.EMPTY_SPACE=ct,g.ENV_MAP=Le,g.ONE_THOUSAND=Ss,g.REACT_NATIVE_PRODUCT=_n,g.RELAYER_DEFAULT_PROTOCOL=Cn,g.SDK_TYPE=bn,g.SLASH=Dn,g.TYPE_0=At,g.TYPE_1=Me,g.UTF8=st,g.appendToQueryString=vn,g.assertType=Us,g.calcExpiry=Hs,g.capitalize=Ps,g.capitalizeWord=On,g.createDelayedPromise=js,g.createExpiringPromise=Ls,g.decodeTypeByte=Ke,g.decrypt=lo,g.deriveSymKey=co,g.deserialize=Tt,g.encodeTypeByte=Vr,g.encrypt=ho,g.engineEvent=Ws,g.enumify=Ms,g.formatAccountId=Qt,g.formatAccountWithChain=qn,g.formatChainId=Jt,g.formatExpirerTarget=zt,g.formatIdTarget=$s,g.formatMessage=Xn,g.formatMessageContext=Ts,g.formatRelayParams=Tn,g.formatRelayRpcUrl=As,g.formatTopicTarget=Bs,g.formatUA=mn,g.formatUri=Qs,g.generateKeyPair=so,g.generateRandomBytes32=uo,g.getAccountsChains=Be,g.getAccountsFromNamespaces=Yn,g.getAddressFromAccount=Zt,g.getAddressesFromAccounts=zn,g.getAppMetadata=Os,g.getChainFromAccount=er,g.getChainsFromAccounts=tr,g.getChainsFromNamespace=ke,g.getChainsFromNamespaces=xn,g.getChainsFromRequiredNamespaces=Gn,g.getDidAddress=nr,g.getDidAddressSegments=Xe,g.getDidChainId=rr,g.getEnvironment=qt,g.getHttpUrl=Ns,g.getInternalError=Ce,g.getJavascriptID=wn,g.getJavascriptOS=yn,g.getLastItems=Sn,g.getNamespacedDidChainId=kn,g.getNamespacesChains=In,g.getNamespacesEventsForChainId=Fn,g.getNamespacesMethodsForChainId=Rn,g.getRelayClientMetadata=Cs,g.getRelayProtocolApi=Ys,g.getRelayProtocolName=zs,g.getRequiredNamespacesFromNamespaces=Zs,g.getSdkError=Re,g.getUniqueValues=_t,g.hasOverlap=Oe,g.hashKey=$r,g.hashMessage=fo,g.isBrowser=gn,g.isConformingNamespaces=gu,g.isExpired=Ks,g.isNode=Wt,g.isProposalStruct=iu,g.isReactNative=En,g.isSessionCompatible=ru,g.isSessionStruct=au,g.isTypeOneEnvelope=Do,g.isUndefined=Ae,g.isValidAccountId=Mn,g.isValidAccounts=Ln,g.isValidActions=$n,g.isValidArray=xe,g.isValidChainId=ht,g.isValidChains=Pn,g.isValidController=ou,g.isValidErrorReason=hu,g.isValidEvent=_u,g.isValidId=cu,g.isValidNamespaceAccounts=Bn,g.isValidNamespaceActions=Gt,g.isValidNamespaceChains=jn,g.isValidNamespaceMethodsOrEvents=xt,g.isValidNamespaces=Vn,g.isValidNamespacesChainId=Du,g.isValidNamespacesEvent=Eu,g.isValidNamespacesRequest=bu,g.isValidNumber=ft,g.isValidObject=Yt,g.isValidParams=fu,g.isValidRelay=Hn,g.isValidRelays=uu,g.isValidRequest=lu,g.isValidRequestExpiry=wu,g.isValidRequiredNamespaces=su,g.isValidResponse=du,g.isValidString=ge,g.isValidUrl=nu,g.mapEntries=Fs,g.mapToObj=Is,g.objToMap=Rs,g.parseAccountId=dt,g.parseChainId=Xt,g.parseContextNames=pn,g.parseExpirerTarget=Vs,g.parseRelayParams=Un,g.parseUri=Js,g.serialize=Hr,g.validateDecoding=_o,g.validateEncoding=Kr,Object.defineProperty(g,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
